# üìä ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö: VM vs Docker Deployment

## ENGSE207 - Week 6 N-Tier Architecture

**‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:** ‡∏ô‡∏≤‡∏¢‡∏®‡∏∏‡∏†‡πÇ‡∏ä‡∏Ñ ‡πÅ‡∏™‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå
**‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤:** 67543210066-6
**‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:** 1 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2569

---

## 1. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Setup Process

| ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô            | Version 1 (VM)                                                                        | Version 2 (Docker)                                              |
| ------------------ | ------------------------------------------------------------------------------------- | --------------------------------------------------------------- |
| ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PostgreSQL | ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ú‡πà‡∏≤‡∏ô `apt install postgresql` ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ user, password ‡πÅ‡∏•‡∏∞ service ‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á | ‡πÉ‡∏ä‡πâ PostgreSQL image ‡∏à‡∏≤‡∏Å Docker Hub ‡∏û‡∏£‡πâ‡∏≠‡∏° environment variables |
| ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node.js    | ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Node.js ‡∏î‡πâ‡∏ß‡∏¢ `apt` ‡∏´‡∏£‡∏∑‡∏≠ `nvm`                                                 | ‡∏£‡∏∞‡∏ö‡∏∏ Node.js version ‡πÉ‡∏ô Dockerfile (node:20-alpine)             |
| ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Nginx      | ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏ú‡πà‡∏≤‡∏ô `apt install nginx` ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ config ‡∏ö‡∏ô VM                                   | ‡πÉ‡∏ä‡πâ Nginx container ‡∏û‡∏£‡πâ‡∏≠‡∏° config file                           |
| Configure Database | ‡πÅ‡∏Å‡πâ‡πÑ‡∏ü‡∏•‡πå config ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á database ‡πÄ‡∏≠‡∏á                                                  | ‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏•‡πå `init.sql` ‡πÅ‡∏•‡∏∞ env vars ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥                       |
| Configure SSL      | ‡∏™‡∏£‡πâ‡∏≤‡∏á certificate ‡πÅ‡∏•‡∏∞ config Nginx ‡πÄ‡∏≠‡∏á                                                | ‡πÉ‡∏ä‡πâ script generate SSL ‡πÅ‡∏•‡∏∞ mount ‡πÄ‡∏Ç‡πâ‡∏≤ container                |
| Start Services     | ‡∏ï‡πâ‡∏≠‡∏á start ‡∏ó‡∏µ‡∏•‡∏∞ service ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ dependency ‡πÄ‡∏≠‡∏á                                      | ‡πÉ‡∏ä‡πâ `docker compose up` ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î                    |
| **‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î**    | ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 60‚Äì90 ‡∏ô‡∏≤‡∏ó‡∏µ                                                                     | ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 15‚Äì25 ‡∏ô‡∏≤‡∏ó‡∏µ                                               |

---

## 2. ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö Resource Usage

| Resource     | Version 1 (VM)                          | Version 2 (Docker)                     |
| ------------ | --------------------------------------- | -------------------------------------- |
| Memory Usage | ‡πÉ‡∏ä‡πâ RAM ‡∏™‡∏π‡∏á‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ó‡∏±‡πâ‡∏á OS (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 1‚Äì2 GB) | ‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ container (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 300‚Äì600 MB) |
| Disk Usage   | ‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å (OS + packages)           | ‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ image ‡πÅ‡∏•‡∏∞ volume              |
| CPU Usage    | ‡πÉ‡∏ä‡πâ CPU ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠ idle               | ‡πÉ‡∏ä‡πâ CPU ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≤‡∏Å‡∏ß‡πà‡∏≤              |
| Startup Time | 1‚Äì3 ‡∏ô‡∏≤‡∏ó‡∏µ                                | ‡πÑ‡∏°‡πà‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ                           |

---

## 3. ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á Docker Deployment

1. **‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß:** ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß (`docker compose up`) ‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ

2. **Environment ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á:** ‡∏•‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‚Äú‡∏£‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏ö‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ú‡∏°‚Äù

3. **‡πÅ‡∏¢‡∏Å Service ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô:** API, Database ‡πÅ‡∏•‡∏∞ Nginx ‡πÅ‡∏¢‡∏Å container ‡∏ï‡∏≤‡∏° N-Tier

4. **‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡πà‡∏≤‡∏¢:** Stop / Start / Rebuild ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢

5. **‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö DevOps:** ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö CI/CD ‡πÅ‡∏•‡∏∞ deployment ‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ‡∏î‡∏µ

---

## 4. ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ç‡∏≠‡∏á Docker Deployment

1. **‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à Docker:** ‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏≠‡∏≤‡∏à‡∏™‡∏±‡∏ö‡∏™‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á network ‡πÅ‡∏•‡∏∞ volume

2. **Debug ‡∏¢‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤:** Error ‡∏ö‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡∏ú‡πà‡∏≤‡∏ô `docker logs`

3. **‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ SSL/Network:** ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à internal network ‡∏Ç‡∏≠‡∏á container

---

## 5. ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ VM vs Docker?

### ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ VM ‡πÄ‡∏°‡∏∑‡πà‡∏≠:

* ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á server ‡πÅ‡∏ö‡∏ö‡πÄ‡∏ï‡πá‡∏°‡∏£‡∏∞‡∏ö‡∏ö (Full OS)
* ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢ service ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö container
* ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏á‡∏≤‡∏ô legacy system

### ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ Docker ‡πÄ‡∏°‡∏∑‡πà‡∏≠:

* ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÅ‡∏•‡∏∞ deploy application ‡πÅ‡∏ö‡∏ö microservices
* ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß‡πÅ‡∏•‡∏∞ consistency
* ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö CI/CD ‡∏´‡∏£‡∏∑‡∏≠ cloud environment

---

## 6. ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏à‡∏≤‡∏Å Lab ‡∏ô‡∏µ‡πâ

‡∏à‡∏≤‡∏Å Lab ‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£ deploy ‡πÅ‡∏ö‡∏ö VM ‡πÅ‡∏•‡∏∞ Docker ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ N-Tier Architecture ‡∏î‡πâ‡∏ß‡∏¢ Docker Compose ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á container networking, health check ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ service dependency ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á Docker ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÅ‡∏•‡∏∞ deploy ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏£‡∏¥‡∏á

---

## 7. ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á Docker ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡πà‡∏≠‡∏¢ (Quick Reference)

```bash
# Build ‡πÅ‡∏•‡∏∞ start containers
docker compose up -d --build

# ‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ containers
docker compose ps

# ‡∏î‡∏π logs
docker compose logs api
docker compose logs nginx

# ‡∏´‡∏¢‡∏∏‡∏î‡∏£‡∏∞‡∏ö‡∏ö
docker compose down

# ‡∏î‡∏π resource usage
docker stats
```
